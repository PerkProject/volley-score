<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.3.1/css/bulma.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="http://websemantics.github.io/Image-Select/src/ImageSelect.css" type="text/css" />
  <link rel="stylesheet" href="http://websemantics.github.io/Image-Select/src/chosen/chosen.css" type="text/css" />
  <link rel="stylesheet" href="http://websemantics.github.io/Image-Select/src/Flat.css" type="text/css" />

  <style type="text/css">
    .optlol {
      width: 50px;
      height: 50px;
      border-radius: 3px;
    }

    .counters {
      align-items: center;
      justify-content: space-around;
      display: flex;
      flex-wrap: wrap;
    }

    .counter {
      margin-bottom: 16px;
    }

    .point {
      width: 120px;
      height: 120px;
      background-color: #ffffff;
      border-radius: 3px;
      border: 1px solid #cacaca;
      color: #222222;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 4px;
    }

    .point > .desc {
      font-size: 10px;
      position: absolute;
      top: 4px;
      left: 4px;
    }

    .point span {
      font-size: 80px;
    }

    .score-button {
      width: 58px;
      height: 58px;
      line-height: 58px;
      font-size: 48px;
    }

    #setB, #setA {
      color: #8b0000;
      font-size: 50px;
    }

    @media only screen and (min-width: 655px) {
      .is-flipped-on-desktop {
        flex-direction: row-reverse;
      }
    }

    @media only screen and (min-width: 820px) {

        .is-big-on-desktop > .point {
            width: 200px;
            height: 200px;
        }

        .is-big-on-desktop span {
          font-size: 150px;
        }

        .is-big-on-desktop > .score-button {
          width: 98px;
          height: 98px;
          font-size: 50px;
        }

        .point > .desc {
          font-size: 14px;
          top: 8px;
          left: 8px;
        }
    }
  </style>
</head>
<body>
  <section class="section">
    <h1 class="title is-1">Scoreboard</h1>
  </section>
  <section class="section">
  <div class="columns is-mobile">
    <div class="column">
      <label class="label" for="nameA">Home Team</label>
      <p class="control">
        <input type="text" class="input is-large" placeholder="Home Team" id="nameA" />
      </p>

      <select id="logoA" class="my-select">
        <option value="askim" data-img-src="/logo/askim.svg">Askim</option>
        <option value="austratt" data-img-src="/logo/austratt.svg">Austrått</option>
        <option value="bktromso" data-img-src="/logo/bktromso.svg">BK Tromsø</option>
        <option value="blindheim" data-img-src="/logo/blindheim.svg">Blindheim</option>
        <option value="blussuvoll" data-img-src="logo/blussuvoll.svg">Blussuvoll</option>
        <option value="bsi" data-img-src="/logo/bsi.svg">BSI</option>
        <option value="dristug" data-img-src="/logo/dristug.svg">Dristug</option>
        <option value="egersund" data-img-src="/logo/egersund.svg">Egersund</option>
        <option value="forde" data-img-src="/logo/forde.svg">Førde</option>
        <option value="gneist" data-img-src="/logo/gneist.svg">Gneist</option>
        <option value="koll" data-img-src="logo/koll.svg">Koll</option>
        <option value="ksk" data-img-src="logo/ksk.svg">KSK</option>
        <option value="lierne" data-img-src="logo/lierne.svg">Lierne</option>
        <option value="ntnui" data-img-src="/logo/ntnui.svg">NTNUI</option>
        <option value="oskil" data-img-src="/logo/oksil.svg">ØKSIL</option>
        <option value="osi" data-img-src="/logo/osi.svg">OSI</option>
        <option value="oslovolley" data-img-src="/logo/oslovolley.svg">NTNUI</option>
        <option value="randaberg" data-img-src="logo/randaberg.svg">Randaberg</option>
        <option value="sandnes" data-img-src="logo/sandnes.svg">Sandnes</option>
        <option value="spiritlorenskog" data-img-src="logo/spiritlorenskog.svg">Sprit Lørenskog</option>
        <option value="stod" data-img-src="logo/stod.svg">Stod</option>
        <option value="sunnfjord" data-img-src="logo/sunnfjord.svg">Sunnfjord</option>
        <option value="tonsberg" data-img-src="logo/tonsberg.svg">Tønsberg</option>
        <option value="tvn" data-img-src="logo/tvn.svg">TVN</option>
        <option value="vestli" data-img-src="logo/vestli.svg">Vestli</option>
        <option value="viking" data-img-src="logo/viking.svg">Viking</option>
      </select>

      <div class="notification is-success">
        <div class="counters is-flipped-on-desktop">
          <div class="counter is-big-on-desktop">
            <div class="point">
              <span class="desc">POINTS</span>
              <span id="pointsA">0</span>
            </div>
            <a class="button is-large score-button" onclick="onClickPlussPointsA()" >+</a>
            <a class="button is-large score-button" onclick="onClickSubtractPointsA()">-</a>
          </div>
          <div class="counter">
            <div class="point">
              <span class="desc">SET</span>
              <span id="setA">0</span>
            </div>
            <a class="button is-large score-button" onclick="onClickPlussSetA()" >+</a>
            <a class="button is-large score-button" onclick="onClickSubtractSetA()">-</a>
          </div>
        </div>
      </div>
    </div>
    <div class="column">
      <label class="label" for="nameB">Away Team</label>
      <p class="control">
        <input type="text" class="input is-large" placeholder="Away Team" id="nameB" />
      </p>

      <select id="logoB" class="my-select">
        <option value="askim" data-img-src="/logo/askim.svg">Askim</option>
        <option value="austratt" data-img-src="/logo/austratt.svg">Austrått</option>
        <option value="bktromso" data-img-src="/logo/bktromso.svg">BK Tromsø</option>
        <option value="blindheim" data-img-src="/logo/blindheim.svg">Blindheim</option>
        <option value="blussuvoll" data-img-src="logo/blussuvoll.svg">Blussuvoll</option>
        <option value="bsi" data-img-src="/logo/bsi.svg">BSI</option>
        <option value="dristug" data-img-src="/logo/dristug.svg">Dristug</option>
        <option value="egersund" data-img-src="/logo/egersund.svg">Egersund</option>
        <option value="forde" data-img-src="/logo/forde.svg">Førde</option>
        <option value="gneist" data-img-src="/logo/gneist.svg">Gneist</option>
        <option value="koll" data-img-src="logo/koll.svg">Koll</option>
        <option value="ksk" data-img-src="logo/ksk.svg">KSK</option>
        <option value="lierne" data-img-src="logo/lierne.svg">Lierne</option>
        <option value="ntnui" data-img-src="/logo/ntnui.svg">NTNUI</option>
        <option value="oskil" data-img-src="/logo/oksil.svg">ØKSIL</option>
        <option value="osi" data-img-src="/logo/osi.svg">OSI</option>
        <option value="oslovolley" data-img-src="/logo/oslovolley.svg">NTNUI</option>
        <option value="randaberg" data-img-src="logo/randaberg.svg">Randaberg</option>
        <option value="sandnes" data-img-src="logo/sandnes.svg">Sandnes</option>
        <option value="spiritlorenskog" data-img-src="logo/spiritlorenskog.svg">Sprit Lørenskog</option>
        <option value="stod" data-img-src="logo/stod.svg">Stod</option>
        <option value="sunnfjord" data-img-src="logo/sunnfjord.svg">Sunnfjord</option>
        <option value="tonsberg" data-img-src="logo/tonsberg.svg">Tønsberg</option>
        <option value="tvn" data-img-src="logo/tvn.svg">TVN</option>
        <option value="vestli" data-img-src="logo/vestli.svg">Vestli</option>
        <option value="viking" data-img-src="logo/viking.svg">Viking</option>
      </select>


      <div class="notification is-info">
        <div class="counters">
          <div class="counter is-big-on-desktop">
            <div class="point">
              <span class="desc">POINTS</span>
              <span id="pointsB">0</span>
            </div>
            <a class="button is-large score-button" onclick="onClickPlussPointsB()" >+</a>
            <a class="button is-large score-button" onclick="onClickSubtractPointsB()">-</a>
          </div>
          <div class="counter">
            <div class="point">
              <span class="desc">SET</span>
              <span id="setB">0</span>
            </div>
            <a class="button is-large score-button" onclick="onClickPlussSetB()" >+</a>
            <a class="button is-large score-button" onclick="onClickSubtractSetB()">-</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  </section>
  <section class="section is-flex">
    <div class="control">
      <a class="button is-large is-danger" onClick="reset()">Reset points</a>
      <a class="button is-large" onClick="save()">Save team names</a>
    </div>
  </section>
  <script
    src="https://code.jquery.com/jquery-3.1.1.min.js"
    integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
    crossorigin="anonymous">
  </script>
  <script type="text/javascript" src="http://websemantics.github.io/Image-Select/src/chosen/chosen.jquery.js"></script>
  <script type="text/javascript" src="http://websemantics.github.io/Image-Select/src/ImageSelect.jquery.js"></script>

  <script>
    var pointsA = 0;
    var pointsB = 0;
    var setA= 0;
    var setB = 0;
    var nameA = 0;
    var nameB = 0;
    var logoA = '';
    var logoB = '';

    function onClickPlussPointsA() {
      pointsA++;
      document.getElementById("pointsA").innerHTML = pointsA;
      save();
    }

    function onClickSubtractPointsA() {
      pointsA--;
      document.getElementById("pointsA").innerHTML = pointsA;
      save();
    }

    function onClickPlussPointsB() {
      pointsB++;
      document.getElementById("pointsB").innerHTML = pointsB;
      save();
    }

    function onClickSubtractPointsB() {
      pointsB--;
      document.getElementById("pointsB").innerHTML = pointsB;
      save();
    }

    function onClickPlussSetA() {
      setA++;
      document.getElementById("setA").innerHTML = setA;
      save();
    }

    function onClickSubtractSetA() {
      setA--;
      document.getElementById("setA").innerHTML = setA;
      save();
    }

    function onClickPlussSetB() {
      setB++;
      document.getElementById("setB").innerHTML = setB;
      save();
    }

    function onClickSubtractSetB() {
      setB--;
      document.getElementById("setB").innerHTML = setB;
      save();
    }

    function save() {
      nameA = document.getElementById("nameA").value || "";
      nameB = document.getElementById("nameB").value || "";
      var selectA = document.getElementById("logoA");
      logoA = selectA.options[selectA.selectedIndex].value;
      var selectB = document.getElementById("logoB");
      logoB = selectB.options[selectB.selectedIndex].value;
      var data = {
        pointsA: pointsA,
        pointsB: pointsB,
        setA: setA,
        setB: setB,
        nameA: nameA,
        nameB: nameB,
        logoA: logoA,
        logoB: logoB
      };

      jQuery.ajax({
        contentType:"application/json; charset=utf-8",
        data: JSON.stringify(data),
        type: "POST",
        url: '/update',
      });
    }

    function reset() {
      pointsA = 0;
      pointsB = 0;
      document.getElementById("pointsA").innerHTML = 0;
      document.getElementById("pointsB").innerHTML = 0;
      save();
    }

    $(".my-select")
      .chosen({ width:"100%", disable_search_threshold: 100 })
      .change(function(data) {
        console.log(data);
      });
    </script>
</body>
